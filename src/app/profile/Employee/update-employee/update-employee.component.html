<app-nav-bar></app-nav-bar>





<div id="back">

  <div *ngIf="!IsLogin" class="wrapper fadeInDown col-md-8 container">
    <div id="formContent">
      <!-- Tabs Titles -->

      <!-- Icon -->
      <div class="fadeIn first">

        <img [src]="profileImage" id="zoom3" height="200em" width="200em" alt="User Icon" class="rounded-circle margin-left ml-2">
        <h1>Update User</h1>
      </div>

      <!-- Sign up Form -->
      <form [formGroup]="ownerForm" autocomplete="off" novalidate (ngSubmit)="createOwner(ownerForm.getRawValue())">
        <div id="UpdateBefore" *ngIf="!next">
          <div class="form-row">
            <div class="form-group col-md-12">
              <input class="form-control" type="text" formControlName="name" required>
              <label>Name</label>

              <em *ngIf="validateControl('name') && hasError('name', 'required')">*Name is required</em>
              <em *ngIf="validateControl('name') && hasError('name', 'maxlength')">*Maximum allowed length is 6
                characters.</em>

            </div>
            <div class="form-group col-md-6">
              <!-- <input type="email" class="form-control"  placeholder="Email" formControlName="email" id="email"> -->
              <input class="form-control" type="text" formControlName="email" required>
              <label>Email</label>
              <em *ngIf="validateControl('email') && hasError('email', 'required')">*Email is required</em>
              <em *ngIf="validateControl('email') && hasError('email', 'email')">*Not a valid email</em>


            </div>
            <div class="form-group col-md-6">
              <!-- <input type="text" class="form-control"  placeholder="Enter Id" formControlName="id" id="id" > -->
              <input class="form-control" type="text" formControlName="id" required>
              <label>Id</label>
              <em *ngIf="validateControl('id') && hasError('id', 'required')">*Id is required</em>
              <em *ngIf="validateControl('id') && hasError('id', 'maxlength')">*Maximum allowed length is 6 characters.</em>

            </div>
            <div class="form-group col-md-6">
              <!-- <input  placeholder="Mobile No." class="form-control" type="text" formControlName="contact" id="contact"> -->
              <input class="form-control" type="text" formControlName="contact" required>
              <label>Contact</label>
              <em *ngIf="validateControl('contact') && hasError('contact', 'required')">*Contact is required</em>
              <em *ngIf="validateControl('contact') && hasError('contact', 'maxlength')">*Maximum allowed length is 6
                characters.</em>

            </div>

          </div>

          <div class="form-row">
            <div class="form-group col-md-6">
              <!-- <input  placeholder="Address city" class="form-control" type="text" formControlName="address1" id="address1"> -->
              <input class="form-control" type="text" formControlName="address1" required>
              <label>City</label>
              <em *ngIf="validateControl('address1') && hasError('address1', 'required')">*City is required</em>
              <em *ngIf="validateControl('address1') && hasError('address1', 'maxlength')">*Maximum allowed length is 6
                characters.</em>

            </div>
            <div class="form-group col-md-6">
              <!-- <input  placeholder="Address Lane" class="form-control" type="text" formControlName="address2" id="address2"> -->
              <input class="form-control" type="text" formControlName="address2" required>
              <label>Address & Lane</label>
              <em *ngIf="validateControl('address2') && hasError('address2', 'required')">*Town is required</em>
              <em *ngIf="validateControl('address2') && hasError('address2', 'maxlength')">*Maximum allowed length is 6
                characters.</em>

            </div>
            <div class="form-group col-md-6">

              <select class="form-control" formControlName="project" placeholder="project" id="project">
                <option value="" selected disabled hidden>projects</option>
                <option [value]="p.prId" *ngFor="let p of projects">{{p.projectName}}</option>
              </select>
            </div>
            <div class="form-group col-md-6">

              <select class="form-control" formControlName="department" placeholder="Department" id="department">
                <option value="" selected disabled hidden>Departments</option>
                <option [value]="d.dprtId" *ngFor="let d of departments">{{d.dprtName}}</option>
              </select>
            </div>
            <em *ngIf="validateControl('department') && hasError('department', 'required')">*Department is required</em>
            <em *ngIf="validateControl('department') && hasError('department', 'maxlength')">*Maximum allowed length is
              6 characters.</em>

            <div class="form-group col-md-6">

              <div class="image-upload-wrap">
                <input class="file-upload-input" type='file' onchange="readURL(this);" multiple accept="image/*"
                  (change)="onFileChange($event.target.files)" />
                <div class="drag-text">
                  <h3>Change Profile picture</h3>
                </div>
              </div>
            </div>
          </div>

          <div class="form-group col-md-8">
            <div class="row">
              <div class="form-group col-md-4 ">
                <label class="gender">Gender:</label>
              </div>
              <div class="form-group col-md-1 ">
                <label class="gender">Male:</label>
              </div>
              <div class="form-group col-md-2 ">

                <input type="radio" name="gender" value="male" formControlName="gender">
              </div>
              <div class="form-group col-md-2 ">
                <label class="gender">FeMale:</label>
              </div>
              <div class="form-group col-md-1 ">

                <input type="radio" name="gender" value="female" formControlName="gender">
              </div>
            </div>
            <em *ngIf="validateControl('gender') && hasError('gender', 'required')">*Id is required</em>
            <em *ngIf="validateControl('gender') && hasError('gender', 'maxlength')">*Maximum allowed length is 6
              characters.</em>

          </div>

          <div class="form-row">
            <div class="form-group">
              <div class="btn-group" role="group" aria-label="Basic example">
                <button (click)=Next() class="btn btn-info" [disabled]="!ownerForm.valid">Next</button>
              </div>
            </div>
          </div>

        </div>

        <div id="fillAfter" *ngIf="next">
          <p> Enter your password to continue this changes</p>
          <div class="form-row container">
            <div class="form-group col-md-6 container">
              <!-- <input  placeholder="Password" class="form-control" type="password" formControlName="password" id="password"> -->
              <input type="password" class="form-control" formControlName="password" required>
              <label>Password</label>
              <em *ngIf="validateControl('password') && hasError('password', 'required')">*Password is required</em>
              <em *ngIf="validateControl('password') && hasError('password', 'maxlength')">*Maximum allowed length is 6
                characters.</em>

            </div>

          </div>
          <div class="form-row">
            <div class="form-group container">
              <div class="btn-group" role="group" aria-label="Basic example">
                <button type="button" class="btn btn-danger" (click)="Next()">Cancel</button>
                <button type="submit" class="btn btn-info" [disabled]="!ownerForm.valid">Update</button>
              </div>
            </div>
          </div>

        </div>
      </form>

      <div id="formFooter">
        <a id="crateAccountlink" class="underlineHover" (click)="redirectToOwnerList()">Sign in</a>

      </div>

    </div>
  </div>


</div>


<script>

  function readURL(input) {
    if (input.files && input.files[0]) {

      var reader = new FileReader();

      reader.onload = function (e) {
        $('.image-upload-wrap').hide();

        $('.file-upload-image').attr('src', e.target.result);
        $('.file-upload-content').show();

        $('.image-title').html(input.files[0].name);
      };

      reader.readAsDataURL(input.files[0]);

    }

  }



</script>